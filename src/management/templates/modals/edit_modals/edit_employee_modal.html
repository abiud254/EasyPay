<!-- Edit Employee Modal -->
<div class="modal fade"
     id="editEmployeeModal-{{ employee.id_number }}"
     tabindex="-1"
     aria-labelledby="editEmployeeModalLabel-{{ employee.id_number }}"
     aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <form method="POST" action="{% url 'edit_employee' employee.id_number %}">
        {% csrf_token %}
        <div class="modal-header text-white bg-warning">
          <h5 class="modal-title fw-bold"
              id="editEmployeeModalLabel-{{ employee.id_number }}">Edit Employee</h5>
          <button type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"></button>
        </div>
        <div class="modal-body" style="background-color: #dbdbdb">
          <div class="row">
            <div class="col-md-6 mb-3">
              <div class="form-floating">
                <input type="text"
                       class="form-control"
                       id="id_number-{{ employee.id_number }}"
                       name="id_number"
                       value="{{ employee.id_number }}"
                       placeholder="ID Number"
                       required>
                <label for="id_number-{{ employee.id_number }}" class="form-label">ID Number</label>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="form-floating">
                <input type="email"
                       class="form-control"
                       id="email-{{ employee.id_number }}"
                       name="email"
                       value="{{ employee.email }}"
                       placeholder="Email"
                       required>
                <label for="email-{{ employee.id_number }}" class="form-label">Email</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <div class="form-floating">
                <input type="text"
                       class="form-control"
                       id="first_name-{{ employee.id_number }}"
                       name="first_name"
                       value="{{ employee.first_name }}"
                       placeholder="First Name"
                       required>
                <label for="first_name-{{ employee.id_number }}" class="form-label">First Name</label>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="form-floating">
                <input type="text"
                       class="form-control"
                       id="last_name-{{ employee.id_number }}"
                       name="last_name"
                       value="{{ employee.last_name }}"
                       placeholder="Last Name"
                       required>
                <label for="last_name-{{ employee.id_number }}" class="form-label">Last Name</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-4 mb-3">
              <div class="form-floating">
                <select class="form-select"
                        id="job_group-{{ employee.id_number }}"
                        name="job_group"
                        required>
                  {% for job_group in job_groups %}
                    <option value="{{ job_group.id }}"
                            {% if employee.job_group.id == job_group.id %}selected{% endif %}>
                      {{ job_group.name }}
                    </option>
                  {% endfor %}
                </select>
                <label for="job_group-{{ employee.id_number }}" class="form-label">Job Group</label>
              </div>
            </div>
            <div class="col-md-4 mb-3">
              <div class="form-floating">
                <select class="form-select"
                        id="department-{{ employee.id_number }}"
                        name="department"
                        required>
                  {% for department in departments %}
                    <option value="{{ department.id }}"
                            {% if employee.department.id == department.id %}selected{% endif %}>
                      {{ department.name }}
                    </option>
                  {% endfor %}
                </select>
                <label for="department-{{ employee.id_number }}" class="form-label">Department</label>
              </div>
            </div>
            <div class="col-md-4 mb-3">
              <div class="form-floating">
                <select class="form-select"
                        id="branch-{{ employee.id_number }}"
                        name="branch"
                        required>
                  {% for branch in branches %}
                    <option value="{{ branch.id }}"
                            {% if employee.branch.id == branch.id %}selected{% endif %}>{{ branch.name }}</option>
                  {% endfor %}
                </select>
                <label for="branch-{{ employee.id_number }}" class="form-label">Branch</label>
              </div>
            </div>
          </div>
          <!-- User Selection -->
          <h5 class="border-bottom border-secondary fw-bold text-start">User</h5>
          <div class="row align-items-center">
            <div class="col-md-6 mb-3">
              <div class="form-floating">
                <select class="form-select"
                        id="user-{{ employee.id_number }}"
                        name="user"
                        disabled>
                  <option value="" {% if not employee.user %}selected{% endif %}>None</option>
                  {% for user in users %}
                    <option value="{{ user.id }}"
                            {% if employee.user and employee.user.id == user.id %}selected{% endif %}>
                      {{ user.username }}
                    </option>
                  {% endfor %}
                </select>
                <label for="user-{{ employee.id_number }}" class="form-label">Linked User</label>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <div class="form-check d-flex">
                <input class="form-check-input me-2"
                       type="checkbox"
                       id="verified"
                       name="verified"
                       {% if employee.verified %}checked{% endif %}
                       disabled>
                <label class="form-check-label" for="verified">Verified</label>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer" style="background-color: #dbdbdb">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit"
                  class="btn text-white"
                  style="background-color: #3626a7">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
</div>
